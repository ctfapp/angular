"use strict";(self.webpackChunknavigator=self.webpackChunknavigator||[]).push([[818],{9818:(Lt,N,v)=>{v.r(N),v.d(N,{ProjectModule:()=>Ut});var j=v(9132),L=v(4859),q=v(811),E=v(4850),z=v(7392),$=v(5655),W=v(3162),Y=v(3238),B=v(3267),Q=v(6308),x=v(7155),J=v(3848),F=v(9549),C=v(7455),G=v(6205),H=v(4466),X=v(7579),M=v(2722),d=v(1639),t=v(4650),K=v(1135),Z=v(4004),tt=v(2843),A=v(2340),y=v(5067);const T={runtime_mappings:{Empresa:{type:"keyword",script:{source:"emit(doc['tenant'].value);"}},Actividade:{type:"keyword",script:{source:"emit(doc['activity'].value);"}},TipoArtigoServicoNome:{type:"keyword",script:{source:"def type  = doc['TipoArtigoServico'].value;\r\nif(type == 'A'){\r\nemit('Artigo')\r\n}\r\nelse {\r\nemit('Servi\xe7o')\r\n}"}}}},R=[{totalSales:{aggs:{1:{sum:{field:"ValorLiquidoVendaEUR"}}},size:0,fields:[{field:"created_date_time",format:"strict_date_time"},{field:"date",format:"date_time"}],script_fields:{},stored_fields:["*"],runtime_mappings:T.runtime_mappings,_source:{excludes:[]},query:{bool:{must:[],filter:[{match_phrase:{resource_type:"vendas"}},{range:{date:{format:"strict_date_optional_time",gte:y.i.dateTime.gte,lte:y.i.dateTime.lte}}}],should:[],must_not:[]}}}},{variationSales:{aggs:{time_offset_split:{filters:{filters:{0:{range:{date:{format:"strict_date_optional_time",gte:y.i.dateTime.gte,lte:y.i.dateTime.lte}}},7839251085:{range:{date:{format:"strict_date_optional_time",gte:y.i.dateTime.gte,lte:y.i.dateTime.gte}}}}},aggs:{0:{sum:{field:"ValorLiquidoVendaEUR"}},1:{sum:{field:"ValorLiquidoVendaEUR"}}}}},size:0,fields:[{field:"created_date_time",format:"strict_date_time"},{field:"date",format:"date_time"}],script_fields:{},stored_fields:["*"],runtime_mappings:T.runtime_mappings,_source:{excludes:[]},query:{bool:{must:[],filter:[{match_phrase:{resource_type:"vendas"}},{bool:{should:[{bool:{filter:[{range:{date:{format:"strict_date_optional_time",gte:y.i.dateTime.gte,lte:y.i.dateTime.lte}}}]}},{bool:{filter:[{range:{date:{format:"strict_date_optional_time",gte:y.i.dateTime.gte,lte:y.i.dateTime.lte}}}]}}],minimum_should_match:1}}],should:[],must_not:[]}}}},{monthlySales:{aggs:{0:{date_histogram:{field:"date",calendar_interval:"1M",time_zone:"Europe/Lisbon"},aggs:{1:{sum:{field:"ValorLiquidoVendaEUR"}}}}},size:0,fields:[{field:"created_date_time",format:"strict_date_time"},{field:"date",format:"date_time"}],script_fields:{},stored_fields:["*"],_source:{excludes:[]},query:{bool:{must:[],filter:[{match_phrase:{resource_type:"vendas"}},{range:{date:{format:"strict_date_optional_time",gte:y.i.dateTime.gte,lte:y.i.dateTime.gte}}}],should:[],must_not:[]}}}},{byCompanyActivity:{aggs:{0:{terms:{field:"activity",order:{2:"desc"},size:30},aggs:{1:{terms:{field:"NomeEmpresa",order:{2:"desc"},size:30},aggs:{2:{sum:{field:"ValorLiquidoVendaEUR"}}}},2:{sum:{field:"ValorLiquidoVendaEUR"}}}}},size:0,fields:[{field:"created_date_time",format:"strict_date_time"},{field:"date",format:"date_time"}],script_fields:{},stored_fields:["*"],runtime_mappings:T.runtime_mappings,_source:{excludes:[]},query:{bool:{must:[],filter:[{match_phrase:{resource_type:"vendas"}},{range:{date:{format:"strict_date_optional_time",gte:"2022-05-19T23:00:00.000Z",lte:"2022-08-18T10:10:29.130Z"}}}],should:[],must_not:[]}}}},{byGroupNotGroupMonth:{aggs:{0:{terms:{field:"VendasGrupo",order:{_key:"asc"},size:3},aggs:{1:{date_histogram:{field:"date",calendar_interval:"1M",time_zone:"Europe/Lisbon"},aggs:{2:{sum:{field:"ValorLiquidoVendaEUR"}}}}}}},size:0,fields:[{field:"created_date_time",format:"strict_date_time"},{field:"date",format:"date_time"}],runtime_mappings:{Empresa:{type:"keyword",script:{source:"emit(doc['tenant'].value);"}},Actividade:{type:"keyword",script:{source:"emit(doc['activity'].value);"}}},_source:{excludes:[]},query:{bool:{must:[],filter:[{match_phrase:{resource_type:"vendas"}},{range:{date:{format:"strict_date_optional_time",gte:"2022-05-23T23:00:00.000Z",lte:"2022-08-22T09:19:58.334Z"}}}],should:[],must_not:[]}}}},{byProductServiceMonth:{aggs:{0:{terms:{field:"TipoArtigoServicoNome",order:{_key:"asc"},size:3},aggs:{1:{date_histogram:{field:"date",calendar_interval:"1M",time_zone:"Europe/Lisbon"},aggs:{2:{sum:{field:"ValorLiquidoVendaEUR"}}}}}}},size:0,fields:[{field:"created_date_time",format:"strict_date_time"},{field:"date",format:"date_time"}],runtime_mappings:{Empresa:{type:"keyword",script:{source:"emit(doc['tenant'].value);"}},Actividade:{type:"keyword",script:{source:"emit(doc['activity'].value);"}},TipoArtigoServicoNome:{type:"keyword",script:{source:"def type  = doc['TipoArtigoServico'].value;\r\nif(type == 'A'){\r\nemit('Artigo')\r\n}\r\nelse {\r\nemit('Servico')\r\n}"}}},_source:{excludes:[]},query:{bool:{must:[],filter:[{match_phrase:{resource_type:"vendas"}},{range:{date:{format:"strict_date_optional_time",gte:"2022-05-23T23:00:00.000Z",lte:"2022-08-22T09:19:58.334Z"}}}],should:[],must_not:[]}}}},{byMarketMonth:{aggs:{0:{terms:{field:"TipoMercado",order:{_key:"asc"},size:3},aggs:{1:{date_histogram:{field:"date",calendar_interval:"1M",time_zone:"Europe/Lisbon"},aggs:{2:{sum:{field:"ValorLiquidoVendaEUR"}}}}}}},size:0,fields:[{field:"created_date_time",format:"strict_date_time"},{field:"date",format:"date_time"}],script_fields:{},stored_fields:["*"],runtime_mappings:{Empresa:{type:"keyword",script:{source:"emit(doc['tenant'].value);"}},Actividade:{type:"keyword",script:{source:"emit(doc['activity'].value);"}}},_source:{excludes:[]},query:{bool:{must:[],filter:[{match_phrase:{resource_type:"vendas"}},{range:{date:{format:"strict_date_optional_time",gte:"2022-05-23T23:00:00.000Z",lte:"2022-08-22T14:58:25.334Z"}}}],should:[],must_not:[]}}}}];var k=v(9570),D=v(7485),et=v(529);let V=(()=>{class a{constructor(e){this._httpClient=e,this.baseUrl=A.N.api.sales.search,this.msearchUrl=A.N.api.sales.msearch,this._data=new K.X(null)}get data$(){return this._data.asObservable()}getData(e){let i="";for(let l of R){let h=Object.keys(l)[0],g=JSON.parse(JSON.stringify(l[h]));"variationSales"===h&&(g=this.applyPreviousDateFilter(g,e)),g=this.applyFilters(g,e),i+="{}\n"+JSON.stringify(g)+"\n"}return this._httpClient.post(this.msearchUrl,i,{headers:{"Content-Type":"application/json"},observe:"response"}).pipe((0,Z.U)(l=>{this._data.next(this.prepareData(l.body.responses))}))}searchData(e){let i="";for(let p of R){let u=Object.keys(p)[0],l=JSON.parse(JSON.stringify(p[u]));"variationSales"===u&&(l=this.applyPreviousDateFilter(l,e)),l=this.applyFilters(l,e),i+="{}\n"+JSON.stringify(l)+"\n"}return this._httpClient.post(this.msearchUrl,i,{headers:{Authorization:"Bearer my-token","Content-Type":"application/json"},observe:"response"}).pipe((0,Z.U)(p=>this.prepareData(p.body.responses)))}prepareData(e){let o={};return o.totalSales=this.totalSales(null!=e?e[0]:{status:204}),o.variation=this.variationSales(null!=e?e[1]:{status:204}),o.monthlySales=this.monthlySales(null!=e?e[2]:{status:204}),o.byCompanyActivity=this.byCompanyActivity(null!=e?e[3]:{status:204}),o.byGroupNotGroupMonth=this.byGroupNotGroupMonth(null!=e?e[4]:{status:204}),o.byProductServiceMonth=this.byProductServiceMonth(null!=e?e[5]:{status:204}),o.byMarketMonth=this.byMarketMonth(null!=e?e[6]:{status:204}),o}applyFilters(e,o){e.query.bool.filter[1].range&&(e.query.bool.filter[1].range.date.gte=o.dateTime.gte,e.query.bool.filter[1].range.date.lte=o.dateTime.lte);let i=[];if(o.customTag.length>0){i.push({bool:{should:[],must_not:[]}});for(let u of o.customTag){let l=u.searchData.split(":")[0],h=u.searchData.split(":")[1];u.filterStatus===D.f.FOR&&i[i.length-1].bool.should.push({match_phrase:{[l]:h}}),u.filterStatus===D.f.OUT&&i[i.length-1].bool.must_not.push({match_phrase:{[l]:h}})}}i.length>0&&(e.query.bool.filter=e.query.bool.filter.concat(i));let p=JSON.stringify(e);return p=p.replace("EUR",o.currency.code),JSON.parse(p)}applyPreviousDateFilter(e,o){let i=new Date(o.dateTime.gte),p=new Date(o.dateTime.lte);i.setFullYear(i.getFullYear()-1),p.setFullYear(p.getFullYear()-1);let u=new Date(i).toISOString(),l=new Date(p).toISOString();return e.aggs.time_offset_split.filters.filters[7839251085].range.date.gte=u,e.aggs.time_offset_split.filters.filters[7839251085].range.date.lte=l,e.query.bool.filter[1].bool.should[1].bool.filter[0].range.date.gte=u,e.query.bool.filter[1].bool.should[1].bool.filter[0].range.date.lte=l,e}totalSales(e){return 204!=e.status?e.aggregations[1].value:0}variationSales(e){let o=0;if(204!=e.status){let i=e.aggregations.time_offset_split.buckets[7839251085][0].value,p=e.aggregations.time_offset_split.buckets[0][0].value;0!=i&&(o=p/i-1)}return o}monthlySales(e){let o={months:[],longMonths:[],sales:[]};if(204!=e.status){let p=(0,k.j)({path:"$..aggregations.0.buckets..value",json:e});p=p.map(function(b){return Number(b.toFixed(2))});const l=(0,k.j)({path:"$..aggregations.0.buckets..key_as_string",json:e}).filter((b,r,f)=>f.indexOf(b)==r);let h=[],g=[];var i=!0;for(let b in l){const r=new Date(l[b]);let f=l[b],s="01"==f.split("-")[1];i||s?(f=f.split("-")[0].slice(2)+r.toLocaleString("default",{month:"short"}),i=!1):f=r.toLocaleString("default",{month:"short"}),h.push(f),g.push(l[b])}o.longMonths=g,o.months=h,o.sales=p}return o}byCompanyActivity(e){let o={tenant:{name:[],value:[],value_perc:[]},activity:{name:[],value:[],value_perc:[]},buckets:[]};if(204!=e.status){let i=0,p=0,u=e.aggregations[0].buckets;for(const l in u){i=0;let h=u[l][1].buckets,g=[];for(const b in h)o.tenant.name.push(h[b].key),o.tenant.value.push(h[b][2].value),i+=h[b][2].value,g.push({x:h[b].key,y:h[b][2].value});p+=i,o.activity.name.push(u[l].key),o.activity.value.push(i),o.buckets.push({name:u[l].key,data:g})}for(const l in o.tenant.value)o.tenant.value_perc.push((o.tenant.value[l]/p*100).toFixed(2));for(const l in o.activity.value)o.activity.value_perc.push((o.activity.value[l]/p*100).toFixed(2))}return o}byGroupNotGroupMonth(e){let o={months:[],longMonths:[],group:{value:[],total:0},notgroup:{value:[],total:0}};if(204!=e.status){const u=(0,k.j)({path:"$..aggregations.0.buckets..key_as_string",json:e}).filter((s,m,c)=>c.indexOf(s)==m);let l=[],h=[];var i=!0;for(let s in u){const m=new Date(u[s]);let c=u[s],_="01"==c.split("-")[1];i||_?(c=c.split("-")[0].slice(2)+m.toLocaleString("default",{month:"short"}),i=!1):c=m.toLocaleString("default",{month:"short"}),l.push(c),h.push(u[s])}let g=(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='Grupo')]..value",json:e}).length>0?(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='Grupo')]..value",json:e}):[0],b=g.length>0?g.reduce((s,m)=>s+m):[0],r=(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='N\xe3o Grupo')]..value",json:e}).length>0?(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='N\xe3o Grupo')]..value",json:e}):[0],f=r.length>0?r.reduce((s,m)=>s+m):0;o.longMonths=h,o.months=l,o.group.value=g,o.group.total=b,o.notgroup.value=r,o.notgroup.total=f}return o}byProductServiceMonth(e){let o={months:[],longMonths:[],product:{value:[],total:0},service:{value:[],total:0}};if(204!=e.status){const u=(0,k.j)({path:"$..aggregations.0.buckets..key_as_string",json:e}).filter((s,m,c)=>c.indexOf(s)==m);let l=[],h=[];var i=!0;for(let s in u){const m=new Date(u[s]);let c=u[s],_="01"==c.split("-")[1];i||_?(c=c.split("-")[0].slice(2)+m.toLocaleString("default",{month:"short"}),i=!1):c=m.toLocaleString("default",{month:"short"}),l.push(c),h.push(u[s])}let g=(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='Artigo')]..value",json:e}).length>0?(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='Artigo')]..value",json:e}):[0],b=g.length>0?g.reduce((s,m)=>s+m):[0],r=(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='Servico')]..value",json:e}).length>0?(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='Servico')]..value",json:e}):[0],f=r.length>0?r.reduce((s,m)=>s+m):0;o.longMonths=h,o.months=l,o.product.value=g,o.product.total=b,o.service.value=r,o.service.total=f}return o}byMarketMonth(e){let o={months:[],longMonths:[],internal:{value:[],total:0},external:{value:[],total:0},community:{value:[],total:0}};if(204!=e.status){const u=(0,k.j)({path:"$..aggregations.0.buckets..key_as_string",json:e}).filter((c,_,S)=>S.indexOf(c)==_);let l=[],h=[];var i=!0;for(let c in u){const _=new Date(u[c]);let S=u[c],O="01"==S.split("-")[1];i||O?(S=S.split("-")[0].slice(2)+_.toLocaleString("default",{month:"short"}),i=!1):S=_.toLocaleString("default",{month:"short"}),l.push(S),h.push(u[c])}let g=(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='INTERNO')]..value",json:e}).length>0?(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='INTERNO')]..value",json:e}):[0],b=g.reduce((c,_)=>c+_),r=(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='EXTERNO')]..value",json:e}).length>0?(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='EXTERNO')]..value",json:e}):[0],f=r.reduce((c,_)=>c+_),s=(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='COMUNITARIO')]..value",json:e}).length>0?(0,k.j)({path:"$.aggregations.0.buckets[?(@.key=='COMUNITARIO')]..value",json:e}):[0],m=s.reduce((c,_)=>c+_);o.longMonths=h,o.months=l,o.internal.value=g,o.internal.total=b,o.external.value=r,o.external.total=f,o.community.value=s,o.community.total=m}return o}handleError(e){return 0===e.status?console.error("An error occurred:",e.error):console.error(`Backend returned code ${e.status}, body was: `,e.error),(0,tt._)(()=>new Error("Something bad happened; please try again later."))}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(et.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var ot=v(5178),P=v(7276),I=v(6895);const at=["chartGrowth"],rt=["chartTreeMap"],it=["chartGroup"],st=["chartDonutGroup"],U=["chartItemService"],nt=["chartDonutItemService"],lt=["chartDonutMarket"];function ct(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.AsE(" ",e("Total")," ",e("Sales")," ")}}function ut(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.lnq(" ",e("Sales")," / ",e("Activity")," / ",e("Company")," ")}}function dt(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e("Company")," ")}}function pt(a,n){1&a&&(t.TgZ(0,"th",51),t.YNc(1,dt,2,1,"ng-container",7),t.qZA())}const w=function(a){return{color:a}};function ht(a,n){if(1&a&&(t.TgZ(0,"td",52)(1,"span",11)(2,"span",53),t._uU(3),t.qZA()()()),2&a){const e=n.$implicit;t.xp6(2),t.Q6J("ngStyle",t.VKq(2,w,e.fontColor)),t.xp6(1),t.Oqu(e.name)}}function mt(a,n){1&a&&(t.TgZ(0,"td",54)(1,"span",11)(2,"span",55),t._uU(3,"Total"),t.qZA()()())}function ft(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e("Net Value")," ")}}function gt(a,n){1&a&&(t.TgZ(0,"th",51),t.YNc(1,ft,2,1,"ng-container",7),t.qZA())}function bt(a,n){if(1&a&&(t.TgZ(0,"td",52)(1,"span",11)(2,"span",53),t._uU(3),t.qZA()()()),2&a){const e=n.$implicit;t.xp6(2),t.Q6J("ngStyle",t.VKq(2,w,e.fontColor)),t.xp6(1),t.Oqu(e.value)}}function vt(a,n){if(1&a&&(t.TgZ(0,"td",54)(1,"span",11)(2,"span",56),t._uU(3),t.qZA()()()),2&a){const e=t.oxw();t.xp6(3),t.Oqu(e.totalNetValue)}}function yt(a,n){1&a&&(t.TgZ(0,"th",51),t._uU(1," % "),t.qZA())}function _t(a,n){1&a&&(t.TgZ(0,"span",61),t._UZ(1,"span",62),t.qZA())}function kt(a,n){1&a&&(t.TgZ(0,"span",63),t._UZ(1,"span",64),t.qZA())}function St(a,n){1&a&&(t.TgZ(0,"span",65),t._UZ(1,"span",66),t.qZA())}function xt(a,n){if(1&a&&(t.TgZ(0,"td",52)(1,"span",11)(2,"span"),t.YNc(3,_t,2,0,"span",57),t.YNc(4,kt,2,0,"span",58),t.YNc(5,St,2,0,"span",59),t.qZA(),t.TgZ(6,"span",60),t._uU(7),t.qZA()()()),2&a){const e=n.$implicit;t.xp6(3),t.Q6J("ngIf",e.percentage<5),t.xp6(1),t.Q6J("ngIf",e.percentage>=5&&e.percentage<10),t.xp6(1),t.Q6J("ngIf",e.percentage>=10),t.xp6(1),t.Q6J("ngStyle",t.VKq(5,w,e.fontColor)),t.xp6(1),t.hij("",e.percentage,"%")}}function Ot(a,n){if(1&a&&(t.TgZ(0,"td",54)(1,"span",11)(2,"span",56),t._uU(3),t.qZA()()()),2&a){const e=t.oxw();t.xp6(3),t.hij("",e.totalNetValuePercentage,"%")}}function Tt(a,n){1&a&&t._UZ(0,"tr",67)}const Mt=function(a){return{"background-color":a}};function Ct(a,n){1&a&&t._UZ(0,"tr",68),2&a&&t.Q6J("ngStyle",t.VKq(1,Mt,n.$implicit.color))}function wt(a,n){1&a&&t._UZ(0,"tr",54)}function Nt(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.AsE(" ",e("Group")," & ",e("Not-group")," ")}}function jt(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e("Group")," ")}}function zt(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e("Not-group")," ")}}function Gt(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.AsE(" ",e("Items")," & ",e("Services")," ")}}function Zt(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e("Item")," ")}}function At(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e("Service")," ")}}function Rt(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e("Market")," ")}}function Dt(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e("Internal")," ")}}function Vt(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e("External")," ")}}function Pt(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e("Community")," ")}}const It=[{path:"",component:(()=>{class a{constructor(e,o,i,p,u,l){this._projectService=e,this._router=o,this._fuseConfigService=i,this._filterMenuService=p,this.changeDetector=u,this.translocoService=l,this.salesVariation={value:"",color:"",icon:""},this.chartGrowthOp={},this.chartTreeMapOp={},this.tableSalesByCompany={},this.chartGroupOp={},this.chartDonutGroupOp={},this.chartItemServiceOp={},this.chartDonutItemServiceOp={},this.chartMarketOp={},this.chartDonutMarketOp={},this._unsubscribeAll=new X.x,this._filterMenuService.filter$.subscribe(h=>{this._filter=h.filter})}ngOnInit(){this._fuseConfigService.config$.pipe((0,M.R)(this._unsubscribeAll)).subscribe(e=>{this.config=e}),this._projectService.data$.pipe((0,M.R)(this._unsubscribeAll)).subscribe(e=>{this.data=e,this._prepareChartData(this._filter)}),this._filterMenuService.filter$.pipe((0,M.R)(this._unsubscribeAll)).subscribe(e=>{this._filter=e.filter,e.propagate&&this._updateData(e.filter)}),window.Apex={chart:{events:{mounted:(e,o)=>{this._fixSvgFill(e.el)},updated:(e,o)=>{this._fixSvgFill(e.el)}}}}}_updateData(e){this.data$=this._projectService.searchData(e),this.data$.pipe((0,M.R)(this._unsubscribeAll)).subscribe(o=>{this.data=o,this._updateChartData(e)})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(e,o){return o.id||e}_fixSvgFill(e){const o=this._router.url;Array.from(e.querySelectorAll("*[fill]")).filter(i=>-1!==i.getAttribute("fill").indexOf("url(")).forEach(i=>{const p=i.getAttribute("fill");i.setAttribute("fill",`url(${o}${p.slice(p.indexOf("#"))}`)})}_prepareChartData(e){this.salesTotal=d.f.shortNumber("currency",e.currency.code,this.data.totalSales),this.salesVariation.value=Number((100*this.data.variation).toFixed(2)),this.salesVariation.icon=this.salesVariation.value>0?"heroicons_solid:trending-up":"heroicons_solid:trending-down",this.salesVariation.text=this.salesVariation.value>0?"above last year":"below last year",this.chartGrowthOp={chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}},fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"line",sparkline:{enabled:!0},toolbar:{show:!1},dropShadow:{enabled:!0,top:10,left:5,blur:3,color:this.config.colors.warning,opacity:.15}},colors:[this.config.colors.warning,this.config.colors.info],dataLabels:{enabled:!0},series:[{name:"Sales This Year",data:this.data.monthlySales.sales}],stroke:{curve:"smooth"},tooltip:{theme:"light"},xaxis:{type:"category",categories:this.data.monthlySales.months},yaxis:{labels:{formatter:r=>d.f.shortNumber("currency",e.currency.code,r)}}},this.chartTreeMapOp={series:this.data.byCompanyActivity.buckets,colors:this.config.colors.chart,legend:{show:!1},chart:{height:"100%",width:"100%",type:"treemap",toolbar:{show:!1},events:{click:function(r,f,s){let c=s.config.series[s.seriesIndex];c&&console.log({NomeEmpresa:c.data[s.dataPointIndex].x,Actividade:c.name})}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},dataLabels:{enabled:!0,formatter:function(r,f){let s=f.w.globals.seriesTotals.reduce((c,_)=>c+_,0);return r+" "+d.f.shortNumber("percentage",null,Number(f.value/s))},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontWeight:"bold"}},plotOptions:{treemap:{enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1}},xaxis:{labels:{style:{fontSize:"13px",colors:this.config.colors.axisColor},formatter:function(r,f){return d.f.shortNumber("currency",e.currency.code,Number(r))+""}}},yaxis:{labels:{style:{fontSize:"13px",colors:this.config.colors.axisColor},formatter:function(r){return d.f.shortNumber("currency",e.currency.code,Number(r))+""}}},responsive:[{breakpoint:1300,options:{chart:{height:350,width:"100%"}}}]},this.tableSalesByCompany={datasource:{columns:["Company","Valor Liquido","%"],rows:[],footer:[]}};let o=0,i=0,p=0,u=0,l=this.data.byCompanyActivity;for(let r of l.buckets){let f=r.data,m=d.f.shortNumber("currency_short",e.currency.code,l.activity.value[o]);this.tableSalesByCompany.datasource.rows.push({fontColor:"#fff",color:this.config.colors.chart[o],activity:r.name,name:r.name,value:m,percentage:l.activity.value_perc[o]});for(let _ of f){let S=l.tenant.value_perc[i],O=_.y;u+=O,p+=parseFloat(S),O=d.f.shortNumber("currency_short",e.currency.code,O),this.tableSalesByCompany.datasource.rows.push({fontColor:"",color:"",activity:r.name,name:_.x,value:O,percentage:S}),i++}o++}this.totalNetValue=d.f.shortNumber("currency",e.currency.code,u),this.totalNetValuePercentage=p+"";let h=this.data.byGroupNotGroupMonth;this.chartGroupOp={chart:{height:350,width:"95%",type:"bar",stacked:!0,parentHeightOffset:0,toolbar:{show:!1},events:{click:function(r,f,s){let m=s.config,c=m.series[s.seriesIndex];c&&console.log({date:m.xaxis.longCategories[s.dataPointIndex],VendasGrupo:c.name})}}},colors:[this.config.colors.sales.group,this.config.colors.sales.notgroup],dataLabels:{enabled:!1},fill:{opacity:1},grid:{borderColor:this.config.colors.borderColor},legend:{show:!0,position:"top",horizontalAlign:"left",fontSize:this.config.legend.fontSize,markers:{height:8,width:8,radius:12,offsetX:-3},labels:{colors:this.config.colors.axisColor},itemMargin:{horizontal:10}},plotOptions:{bar:{horizontal:!1,barHeight:"100%",columnWidth:"15%",borderRadius:10}},series:[{name:this.translocoService.translate("Group"),data:h.group.value},{name:this.translocoService.translate("Not Group"),data:h.notgroup.value}],stroke:{show:!0,colors:["transparent"],curve:"smooth",width:6,lineCap:"round"},tooltip:{followCursor:!0,theme:"light"},xaxis:{categories:h.months,longCategories:h.longMonths,labels:{style:{fontSize:"13px",colors:this.config.colors.axisColor},formatter:function(r){return d.f.shortNumber("currency",e.currency.code,r)}},axisTicks:{show:!1},axisBorder:{show:!1}},yaxis:{labels:{style:{fontSize:"13px",colors:this.config.colors.axisColor},formatter:function(r){return d.f.shortNumber("currency",e.currency.code,r)}}},responsive:[{breakpoint:1700,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"32%",horizontal:!1}}}},{breakpoint:1580,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"35%",horizontal:!1}}}},{breakpoint:1440,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"42%",horizontal:!1}}}},{breakpoint:1300,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"48%",horizontal:!1}}}},{breakpoint:1200,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"40%",horizontal:!1}}}},{breakpoint:1040,options:{plotOptions:{bar:{borderRadius:11,columnWidth:"48%",horizontal:!1}}}},{breakpoint:991,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"30%",horizontal:!0}}}},{breakpoint:840,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"35%",horizontal:!0}}}},{breakpoint:768,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"28%",horizontal:!0}}}},{breakpoint:640,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"32%",horizontal:!0}}}},{breakpoint:576,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"37%",horizontal:!0}}}},{breakpoint:480,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"45%",horizontal:!0}}}},{breakpoint:420,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"52%",horizontal:!0}}}},{breakpoint:380,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"60%",horizontal:!0}}}}],states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}}},this.chartDonutGroupOp={chart:{height:250,type:"donut",events:{dataPointSelection:(r,f,s)=>{}}},labels:[this.translocoService.translate("Group"),this.translocoService.translate("Not Group")],series:[h.group.total,h.notgroup.total],colors:[this.config.colors.sales.group,this.config.colors.sales.notgroup],stroke:{show:!1,curve:"straight"},dataLabels:{enabled:!0,formatter:function(r,f){return d.f.shortNumber("percentage",null,Number(r/100))}},legend:{show:!1,position:"top",fontSize:this.config.legend.fontSize},plotOptions:{pie:{donut:{size:"60%",labels:{show:!0,name:{fontSize:"2rem"},value:{fontSize:"1rem",formatter:function(r){return d.f.shortNumber("currency",e.currency.code,Number(r))+""}},total:{show:!0,fontSize:"1.5rem",label:"Total",formatter:function(r){let f=r.config.series.reduce((s,m)=>s+m,0);return d.f.shortNumber("currency",e.currency.code,f)+""}}}}}},tooltip:{y:{formatter:function(r){return d.f.shortNumber("currency",e.currency.code,Number(r))+""}}},responsive:[{breakpoint:992,options:{chart:{height:380},legend:{position:"bottom"}}},{breakpoint:576,options:{chart:{height:320},plotOptions:{pie:{donut:{labels:{show:!0,name:{fontSize:"1.5rem"},value:{fontSize:"1rem"},total:{fontSize:"1.5rem"}}}}},legend:{position:"bottom"}}},{breakpoint:420,options:{legend:{show:!1}}},{breakpoint:360,options:{chart:{height:280},legend:{show:!1}}}]},this.groupTotal=d.f.shortNumber("currency_short",e.currency.code,h.group.total),this.notgroupTotal=d.f.shortNumber("currency_short",e.currency.code,h.notgroup.total);let g=this.data.byProductServiceMonth;this.chartItemServiceOp={chart:{height:350,width:"95%",type:"bar",stacked:!0,parentHeightOffset:0,toolbar:{show:!1},events:{click:function(r,f,s){let m=s.config,c=m.series[s.seriesIndex];c&&console.log({date:m.xaxis.longCategories[s.dataPointIndex],TipoArtigoServicoNome:c.name})}}},plotOptions:{bar:{horizontal:!1,barHeight:"100%",columnWidth:"15%",borderRadius:10}},colors:[this.config.colors.sales.product,this.config.colors.sales.service],dataLabels:{enabled:!1},stroke:{show:!0,colors:["transparent"],curve:"smooth",width:6,lineCap:"round"},legend:{show:!0,position:"top",horizontalAlign:"left",fontSize:this.config.legend.fontSize,markers:{height:8,width:8,radius:12,offsetX:-3},labels:{colors:this.config.colors.axisColor},itemMargin:{horizontal:10}},grid:{borderColor:this.config.colors.borderColor},xaxis:{categories:g.months,longCategories:g.longMonths,labels:{style:{fontSize:"13px",colors:this.config.colors.axisColor},formatter:function(r){return d.f.shortNumber("currency",e.currency.code,r)}},axisTicks:{show:!1},axisBorder:{show:!1}},yaxis:{labels:{style:{fontSize:"13px",colors:this.config.colors.axisColor},formatter:function(r){return d.f.shortNumber("currency",e.currency.code,r)}}},series:[{name:"Item",data:g.product.value},{name:"Service",data:g.service.value}],fill:{opacity:1},tooltip:{followCursor:!0,theme:"light"},responsive:[{breakpoint:1700,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"32%",horizontal:!1}}}},{breakpoint:1580,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"35%",horizontal:!1}}}},{breakpoint:1440,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"42%",horizontal:!1}}}},{breakpoint:1300,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"48%",horizontal:!1}}}},{breakpoint:1200,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"40%",horizontal:!1}}}},{breakpoint:1040,options:{plotOptions:{bar:{borderRadius:11,columnWidth:"48%",horizontal:!1}}}},{breakpoint:991,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"30%",horizontal:!0}}}},{breakpoint:840,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"35%",horizontal:!0}}}},{breakpoint:768,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"28%",horizontal:!0}}}},{breakpoint:640,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"32%",horizontal:!0}}}},{breakpoint:576,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"37%",horizontal:!0}}}},{breakpoint:480,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"45%",horizontal:!0}}}},{breakpoint:420,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"52%",horizontal:!0}}}},{breakpoint:380,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"60%",horizontal:!0}}}}],states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}}},this.chartDonutItemServiceOp={chart:{height:250,type:"donut",events:{dataPointSelection:(r,f,s)=>{}}},labels:["Item","Service"],series:[g.product.total,g.service.total],colors:[this.config.colors.sales.product,this.config.colors.sales.service],stroke:{show:!1,curve:"straight"},dataLabels:{enabled:!0,formatter:function(r,f){return d.f.shortNumber("percentage",null,Number(r/100))}},legend:{show:!1,position:"top",fontSize:this.config.legend.fontSize},plotOptions:{pie:{donut:{size:"60%",labels:{show:!0,name:{fontSize:"2rem"},value:{fontSize:"1rem",formatter:function(r){return d.f.shortNumber("currency",e.currency.code,Number(r))+""}},total:{show:!0,fontSize:"1.5rem",label:"Total",formatter:function(r){let f=r.config.series.reduce((s,m)=>s+m,0);return d.f.shortNumber("currency",e.currency.code,f)+""}}}}}},tooltip:{y:{formatter:function(r){return d.f.shortNumber("currency",e.currency.code,Number(r))+""}}},responsive:[{breakpoint:992,options:{chart:{height:380},legend:{position:"bottom"}}},{breakpoint:576,options:{chart:{height:320},plotOptions:{pie:{donut:{labels:{show:!0,name:{fontSize:"1.5rem"},value:{fontSize:"1rem"},total:{fontSize:"1.5rem"}}}}},legend:{position:"bottom"}}},{breakpoint:420,options:{legend:{show:!1}}},{breakpoint:360,options:{chart:{height:280},legend:{show:!1}}}]},this.itemsTotal=d.f.shortNumber("currency_short",e.currency.code,g.product.total),this.serviceTotal=d.f.shortNumber("currency_short",e.currency.code,g.service.total);let b=this.data.byMarketMonth;this.chartMarketOp={chart:{height:350,width:"95%",type:"bar",stacked:!0,parentHeightOffset:0,toolbar:{show:!1},events:{click:function(r,f,s){let m=s.config,c=m.series[s.seriesIndex];c&&console.log({date:m.xaxis.longCategories[s.dataPointIndex],Mercado:c.name})}}},plotOptions:{bar:{horizontal:!1,barHeight:"100%",columnWidth:"15%",borderRadius:10}},colors:[this.config.colors.sales.marketInternal,this.config.colors.sales.marketExternal,this.config.colors.sales.marketCommunity],dataLabels:{enabled:!1},stroke:{show:!0,colors:["transparent"],curve:"smooth",width:6,lineCap:"round"},legend:{show:!0,position:"top",horizontalAlign:"left",fontSize:this.config.legend.fontSize,markers:{height:8,width:8,radius:12,offsetX:-3},labels:{colors:this.config.colors.axisColor},itemMargin:{horizontal:10}},grid:{borderColor:this.config.colors.borderColor},xaxis:{categories:b.months,longCategories:b.longMonths,labels:{style:{fontSize:"13px",colors:this.config.colors.axisColor},formatter:function(r){return d.f.shortNumber("currency",e.currency.code,r)}},axisTicks:{show:!1},axisBorder:{show:!1}},yaxis:{labels:{style:{fontSize:"13px",colors:this.config.colors.axisColor},formatter:function(r){return d.f.shortNumber("currency",e.currency.code,r)}}},series:[{name:"Internal",data:b.internal.value},{name:"External",data:b.external.value},{name:"Community",data:b.community.value}],fill:{opacity:1},tooltip:{followCursor:!0,theme:"light"},responsive:[{breakpoint:1700,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"32%",horizontal:!1}}}},{breakpoint:1580,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"35%",horizontal:!1}}}},{breakpoint:1440,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"42%",horizontal:!1}}}},{breakpoint:1300,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"48%",horizontal:!1}}}},{breakpoint:1200,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"40%",horizontal:!1}}}},{breakpoint:1040,options:{plotOptions:{bar:{borderRadius:11,columnWidth:"48%",horizontal:!1}}}},{breakpoint:991,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"30%",horizontal:!0}}}},{breakpoint:840,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"35%",horizontal:!0}}}},{breakpoint:768,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"28%",horizontal:!0}}}},{breakpoint:640,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"32%",horizontal:!0}}}},{breakpoint:576,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"37%",horizontal:!0}}}},{breakpoint:480,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"45%",horizontal:!0}}}},{breakpoint:420,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"52%",horizontal:!0}}}},{breakpoint:380,options:{plotOptions:{bar:{borderRadius:10,columnWidth:"60%",horizontal:!0}}}}],states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}}},this.chartDonutMarketOp={chart:{height:250,type:"donut",events:{dataPointSelection:(r,f,s)=>{}}},labels:["Internal","External","Community"],series:[b.internal.total,b.external.total,b.community.total],colors:[this.config.colors.sales.marketInternal,this.config.colors.sales.marketExternal,this.config.colors.sales.marketCommunity],stroke:{show:!1,curve:"straight"},dataLabels:{enabled:!0,formatter:function(r,f){return d.f.shortNumber("percentage",null,Number(r/100))}},legend:{show:!1,position:"top",fontSize:this.config.legend.fontSize},plotOptions:{pie:{donut:{size:"60%",labels:{show:!0,name:{fontSize:"2rem"},value:{fontSize:"1rem",formatter:function(r){return d.f.shortNumber("currency",e.currency.code,Number(r))+""}},total:{show:!0,fontSize:"1.5rem",label:"Total",formatter:function(r){let f=r.config.series.reduce((s,m)=>s+m,0);return d.f.shortNumber("currency",e.currency.code,f)+""}}}}}},tooltip:{y:{formatter:function(r){return d.f.shortNumber("currency",e.currency.code,Number(r))+""}}},responsive:[{breakpoint:992,options:{chart:{height:380},legend:{position:"bottom"}}},{breakpoint:576,options:{chart:{height:320},plotOptions:{pie:{donut:{labels:{show:!0,name:{fontSize:"1.5rem"},value:{fontSize:"1rem"},total:{fontSize:"1.5rem"}}}}},legend:{position:"bottom"}}},{breakpoint:420,options:{legend:{show:!1}}},{breakpoint:360,options:{chart:{height:280},legend:{show:!1}}}]},this.internalTotal=d.f.shortNumber("currency_short",e.currency.code,b.internal.total),this.externalTotal=d.f.shortNumber("currency_short",e.currency.code,b.external.total),this.commlTotal=d.f.shortNumber("currency_short",e.currency.code,b.community.total)}_updateChartData(e){this.salesTotal=d.f.shortNumber("currency",e.currency.code,this.data.totalSales),this.salesVariation.value=Number((100*this.data.variation).toFixed(2)),this.salesVariation.icon=this.salesVariation.value>0?"heroicons_solid:trending-up":"heroicons_solid:trending-down",this.salesVariation.text=this.salesVariation.value>0?"above last year":"below last year",this.chartTreeMap.updateOptions({series:this.data.byCompanyActivity.buckets}),this.chartGrowth.updateOptions({series:[{data:this.data.monthlySales.sales}],xaxis:{type:"category",categories:this.data.monthlySales.months,longCategories:this.data.monthlySales.longMonths}}),this.tableSalesByCompany={datasource:{columns:["Company","Valor Liquido","%"],rows:[],footer:[]}};let o=0,i=0,p=this.data.byCompanyActivity;for(let u of p.buckets){let l=u.data,h=p.activity.value[o];h=d.f.shortNumber("currency_short",e.currency.code,h),this.tableSalesByCompany.datasource.rows.push({fontColor:"#fff",color:this.config.colors.chart[o],activity:u.name,name:u.name,value:h,percentage:p.activity.value_perc[o]});for(let b of l){let r=b.y;r=d.f.shortNumber("currency_short",e.currency.code,r),this.tableSalesByCompany.datasource.rows.push({fontColor:"",color:"",activity:u.name,name:b.x,value:r,percentage:p.tenant.value_perc[i]}),i++}o++}this.tableSalesByCompany.datasource.footer.push("Total","100M","100%"),this.chartGroup.updateOptions({series:[{name:"Grupo",data:this.data.byGroupNotGroupMonth.group.value},{name:"N\xe3o Grupo",data:this.data.byGroupNotGroupMonth.notgroup.value}],xaxis:{categories:this.data.byGroupNotGroupMonth.months,longCategories:this.data.byGroupNotGroupMonth.longMonths}}),this.chartDonutGroup.updateSeries([this.data.byGroupNotGroupMonth.group.total,this.data.byGroupNotGroupMonth.notgroup.total]),this.groupTotal=d.f.shortNumber("currency_short",e.currency.code,this.data.byGroupNotGroupMonth.group.total),this.notgroupTotal=d.f.shortNumber("currency_short",e.currency.code,this.data.byGroupNotGroupMonth.notgroup.total),this.chartItemService.updateOptions({series:[{name:"Item",data:this.data.byProductServiceMonth.product.value},{name:"Service",data:this.data.byProductServiceMonth.service.value}],xaxis:{categories:this.data.byProductServiceMonth.months,longCategories:this.data.byProductServiceMonth.longMonths}}),this.chartDonutItemService.updateSeries([this.data.byProductServiceMonth.product.total,this.data.byProductServiceMonth.service.total]),this.itemsTotal=d.f.shortNumber("currency_short",e.currency.code,this.data.byProductServiceMonth.product.total),this.serviceTotal=d.f.shortNumber("currency_short",e.currency.code,this.data.byProductServiceMonth.service.total),this.chartMarket.updateOptions({series:[{name:"Internal",data:this.data.byMarketMonth.internal.value},{name:"External",data:this.data.byMarketMonth.external.value},{name:"Community",data:this.data.byMarketMonth.community.value}],xaxis:{categories:this.data.byMarketMonth.months,longCategories:this.data.byMarketMonth.longMonths}}),this.chartDonutMarket.updateSeries([this.data.byMarketMonth.internal.total,this.data.byMarketMonth.external.total,this.data.byMarketMonth.community.total]),this.internalTotal=d.f.shortNumber("currency_short",e.currency.code,this.data.byMarketMonth.internal.total),this.externalTotal=d.f.shortNumber("currency_short",e.currency.code,this.data.byMarketMonth.external.total),this.commlTotal=d.f.shortNumber("currency_short",e.currency.code,this.data.byMarketMonth.community.total),this.changeDetector.detectChanges()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(V),t.Y36(j.F0),t.Y36(ot.m),t.Y36(P.a),t.Y36(t.sBO),t.Y36(C.Vn))},a.\u0275cmp=t.Xpm({type:a,selectors:[["total"]],viewQuery:function(e,o){if(1&e&&(t.Gf(at,5),t.Gf(rt,5),t.Gf(it,5),t.Gf(st,5),t.Gf(U,5),t.Gf(nt,5),t.Gf(U,5),t.Gf(lt,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.chartGrowth=i.first),t.iGM(i=t.CRH())&&(o.chartTreeMap=i.first),t.iGM(i=t.CRH())&&(o.chartGroup=i.first),t.iGM(i=t.CRH())&&(o.chartDonutGroup=i.first),t.iGM(i=t.CRH())&&(o.chartItemService=i.first),t.iGM(i=t.CRH())&&(o.chartDonutItemService=i.first),t.iGM(i=t.CRH())&&(o.chartMarket=i.first),t.iGM(i=t.CRH())&&(o.chartDonutMarket=i.first)}},decls:122,vars:111,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto"],[1,"w-full","max-w-screen-xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-1","md:grid-cols-1","gap-6","w-full","min-w-0"],[1,"sm:col-span-4","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex","items-start","justify-between"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[4,"transloco"],[1,"flex","items-center","mt-1"],[1,"flex","flex-col"],[1,"text-3xl","font-semibold","tracking-tight","leading-tight"],[1,"flex","items-center"],[1,"mr-1","icon-size-5",3,"svgIcon"],[1,"font-medium","text-sm","text-secondary","leading-none","whitespace-nowrap"],[1,"flex","flex-col","flex-auto","ml-8"],[1,"flex-auto","w-full","h-16",3,"chart","colors","series","stroke","tooltip","xaxis","yaxis"],["chartGrowth",""],[1,"flex","flex-col","sm:flex-row","items-start","justify-between"],[1,"grid","grid-cols-1","lg:grid-cols-2","grid-flow-row","gap-6","w-full","mt-8","sm:mt-4"],[1,"flex","flex-col","flex-auto"],[1,"flex-auto","w-auto","h-100",3,"chart","colors","dataLabels","legend","plotOptions","responsive","series","xaxis","yaxis"],["chartTreeMap",""],[1,"flex-auto","grid","grid-cols-1","gap-4","mt-6"],["mat-table","",1,"table-auto","overflow-y-visible",3,"dataSource"],["matColumnDef","Company","sticky",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-row","",4,"matFooterCellDef"],["matColumnDef","Valor Liquido","sticky",""],["matColumnDef","%"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","w-2 h-2 rounded-full hover:bg-primary-100",3,"ngStyle",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],[1,"grid","lg:grid-cols-4","md:grid-cols-4","sm:grid-cols-1","grid-flow-row","gap-6","w-full","mt-8","sm:mt-4"],[1,"flex","flex-col","flex-auto","lg:col-span-3","md:col-span-3","sm:col-span-1"],[1,"flex-auto","w-auto","h-80",3,"chart","colors","dataLabels","fill","grid","legend","plotOptions","responsive","series","states","stroke","tooltip","xaxis","yaxis"],["chartGroup",""],[1,"flex","flex-col","lg:col-span-1","md:col-span-1","sm:col-span-1"],[1,"flex-auto","flex-col","mt-6"],[1,"flex-auto","w-auto","h-80",3,"chart","colors","dataLabels","labels","legend","plotOptions","responsive","series","stroke","tooltip"],["chartDonutGroup",""],[1,"grid","grid-cols-2","border-t","divide-x","-m-6","mt-4","bg-gray-50","dark:bg-transparent"],[1,"flex","flex-col","items-center","justify-center","p-6","sm:p-8"],[1,"text-xl","font-semibold","leading-none","tracking-tighter"],[1,"mt-1","text-center","text-secondary"],["chartItemService",""],[1,"flex-auto","flex-col","flex-auto","mt-6"],["chartDonutItemService",""],["chartMarket",""],["chartDonutMarket",""],[1,"grid","grid-cols-3","border-t","divide-x","-m-6","mt-4","bg-gray-50","dark:bg-transparent"],["mat-header-cell",""],["mat-cell",""],[1,"ml-1","leading-4",3,"ngStyle"],["mat-footer-row",""],[1,"ml-1","leading-4","pl-6","font-medium"],[1,"ml-1","leading-4","font-medium"],["class","flex items-end w-1 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end w-1 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end w-1 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],[1,"ml-3","leading-4",3,"ngStyle"],[1,"flex","items-end","w-1","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-red-600"],[1,"flex","items-end","w-1","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","w-full","h-2/4","bg-orange-400"],[1,"flex","items-end","w-1","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-green-400"],["mat-header-row",""],["mat-row","",1,"w-2","h-2","rounded-full","hover:bg-primary-100",3,"ngStyle"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t.YNc(7,ct,2,2,"ng-container",7),t.qZA()(),t.TgZ(8,"div",8)(9,"div",9)(10,"div",10),t._uU(11),t.qZA(),t.TgZ(12,"div",11),t._UZ(13,"mat-icon",12),t.TgZ(14,"div",13)(15,"span"),t._uU(16),t.qZA(),t._uU(17),t.qZA()()(),t.TgZ(18,"div",14),t._UZ(19,"apx-chart",15,16),t.qZA()()(),t.TgZ(21,"div",4)(22,"div",17)(23,"div",6),t.YNc(24,ut,2,3,"ng-container",7),t.qZA()(),t.TgZ(25,"div",18)(26,"div",19)(27,"div",19),t._UZ(28,"apx-chart",20,21),t.qZA()(),t.TgZ(30,"div",9)(31,"div",22)(32,"table",23),t.ynx(33,24),t.YNc(34,pt,2,0,"th",25),t.YNc(35,ht,4,4,"td",26),t.YNc(36,mt,4,0,"td",27),t.BQk(),t.ynx(37,28),t.YNc(38,gt,2,0,"th",25),t.YNc(39,bt,4,4,"td",26),t.YNc(40,vt,4,1,"td",27),t.BQk(),t.ynx(41,29),t.YNc(42,yt,2,0,"th",25),t.YNc(43,xt,8,7,"td",26),t.YNc(44,Ot,4,1,"td",27),t.BQk(),t.YNc(45,Tt,1,0,"tr",30),t.YNc(46,Ct,1,3,"tr",31),t.YNc(47,wt,1,0,"tr",32),t.qZA()()()()(),t.TgZ(48,"div",4)(49,"div",17)(50,"div",6),t.YNc(51,Nt,2,2,"ng-container",7),t.qZA()(),t.TgZ(52,"div",33)(53,"div",34),t._UZ(54,"apx-chart",35,36),t.qZA(),t.TgZ(56,"div",37)(57,"div",38),t._UZ(58,"apx-chart",39,40),t.qZA(),t.TgZ(60,"div",41)(61,"div",42)(62,"div",43),t._uU(63),t.qZA(),t.TgZ(64,"div",44),t.YNc(65,jt,2,1,"ng-container",7),t.qZA()(),t.TgZ(66,"div",42)(67,"div",43),t._uU(68),t.qZA(),t.TgZ(69,"div",44),t.YNc(70,zt,2,1,"ng-container",7),t.qZA()()()()()(),t.TgZ(71,"div",4)(72,"div",17)(73,"div",6),t.YNc(74,Gt,2,2,"ng-container",7),t.qZA()(),t.TgZ(75,"div",33)(76,"div",34),t._UZ(77,"apx-chart",35,45),t.qZA(),t.TgZ(79,"div",37)(80,"div",46),t._UZ(81,"apx-chart",39,47),t.qZA(),t.TgZ(83,"div",41)(84,"div",42)(85,"div",43),t._uU(86),t.qZA(),t.TgZ(87,"div",44),t.YNc(88,Zt,2,1,"ng-container",7),t.qZA()(),t.TgZ(89,"div",42)(90,"div",43),t._uU(91),t.qZA(),t.TgZ(92,"div",44),t.YNc(93,At,2,1,"ng-container",7),t.qZA()()()()()(),t.TgZ(94,"div",4)(95,"div",17)(96,"div",6),t.YNc(97,Rt,2,1,"ng-container",7),t.qZA()(),t.TgZ(98,"div",33)(99,"div",34),t._UZ(100,"apx-chart",35,48),t.qZA(),t.TgZ(102,"div",37)(103,"div",46),t._UZ(104,"apx-chart",39,49),t.qZA(),t.TgZ(106,"div",50)(107,"div",42)(108,"div",43),t._uU(109),t.qZA(),t.TgZ(110,"div",44),t.YNc(111,Dt,2,1,"ng-container",7),t.qZA()(),t.TgZ(112,"div",42)(113,"div",43),t._uU(114),t.qZA(),t.TgZ(115,"div",44),t.YNc(116,Vt,2,1,"ng-container",7),t.qZA()(),t.TgZ(117,"div",42)(118,"div",43),t._uU(119),t.qZA(),t.TgZ(120,"div",44),t.YNc(121,Pt,2,1,"ng-container",7),t.qZA()()()()()()()()()()),2&e&&(t.xp6(11),t.hij(" ",o.salesTotal," "),t.xp6(2),t.ekj("text-green-500",o.salesVariation.value>0)("text-red-500",o.salesVariation.value<=0),t.s9C("svgIcon",o.salesVariation.icon),t.xp6(2),t.ekj("text-green-500",o.salesVariation.value>0)("text-red-500",o.salesVariation.value<=0),t.xp6(1),t.hij("",o.salesVariation.value,"%"),t.xp6(1),t.hij(" ",o.salesVariation.text," "),t.xp6(2),t.Q6J("chart",o.chartGrowthOp.chart)("colors",o.chartGrowthOp.colors)("series",o.chartGrowthOp.series)("stroke",o.chartGrowthOp.stroke)("tooltip",o.chartGrowthOp.tooltip)("xaxis",o.chartGrowthOp.xaxis)("yaxis",o.chartGrowthOp.yaxis),t.xp6(9),t.Q6J("chart",o.chartTreeMapOp.chart)("colors",o.chartTreeMapOp.colors)("dataLabels",o.chartTreeMapOp.dataLabels)("legend",o.chartTreeMapOp.legend)("plotOptions",o.chartTreeMapOp.plotOptions)("responsive",o.chartTreeMapOp.responsive)("series",o.chartTreeMapOp.series)("xaxis",o.chartTreeMapOp.xaxis)("yaxis",o.chartTreeMapOp.yaxis),t.xp6(4),t.Q6J("dataSource",o.tableSalesByCompany.datasource.rows),t.xp6(13),t.Q6J("matHeaderRowDef",o.tableSalesByCompany.datasource.columns),t.xp6(1),t.Q6J("matRowDefColumns",o.tableSalesByCompany.datasource.columns),t.xp6(1),t.Q6J("matFooterRowDef",o.tableSalesByCompany.datasource.columns),t.xp6(7),t.Q6J("chart",o.chartGroupOp.chart)("colors",o.chartGroupOp.colors)("dataLabels",o.chartGroupOp.dataLabels)("fill",o.chartGroupOp.fill)("grid",o.chartGroupOp.grid)("legend",o.chartGroupOp.legend)("plotOptions",o.chartGroupOp.plotOptions)("responsive",o.chartGroupOp.responsive)("series",o.chartGroupOp.series)("states",o.chartGroupOp.states)("stroke",o.chartGroupOp.stroke)("tooltip",o.chartGroupOp.tooltip)("xaxis",o.chartGroupOp.xaxis)("yaxis",o.chartGroupOp.yaxis),t.xp6(4),t.Q6J("chart",o.chartDonutGroupOp.chart)("colors",o.chartDonutGroupOp.colors)("dataLabels",o.chartDonutGroupOp.dataLabels)("labels",o.chartDonutGroupOp.labels)("legend",o.chartDonutGroupOp.legend)("plotOptions",o.chartDonutGroupOp.plotOptions)("responsive",o.chartDonutGroupOp.responsive)("series",o.chartDonutGroupOp.series)("stroke",o.chartDonutGroupOp.stroke)("tooltip",o.chartDonutGroupOp.tooltip),t.xp6(5),t.hij(" ",o.groupTotal," "),t.xp6(5),t.hij(" ",o.notgroupTotal," "),t.xp6(9),t.Q6J("chart",o.chartItemServiceOp.chart)("colors",o.chartItemServiceOp.colors)("dataLabels",o.chartItemServiceOp.dataLabels)("fill",o.chartItemServiceOp.fill)("grid",o.chartItemServiceOp.grid)("legend",o.chartItemServiceOp.legend)("plotOptions",o.chartItemServiceOp.plotOptions)("responsive",o.chartItemServiceOp.responsive)("series",o.chartItemServiceOp.series)("states",o.chartItemServiceOp.states)("stroke",o.chartItemServiceOp.stroke)("tooltip",o.chartItemServiceOp.tooltip)("xaxis",o.chartItemServiceOp.xaxis)("yaxis",o.chartItemServiceOp.yaxis),t.xp6(4),t.Q6J("chart",o.chartDonutItemServiceOp.chart)("colors",o.chartDonutItemServiceOp.colors)("dataLabels",o.chartDonutItemServiceOp.dataLabels)("labels",o.chartDonutItemServiceOp.labels)("legend",o.chartDonutItemServiceOp.legend)("plotOptions",o.chartDonutItemServiceOp.plotOptions)("responsive",o.chartDonutItemServiceOp.responsive)("series",o.chartDonutItemServiceOp.series)("stroke",o.chartDonutItemServiceOp.stroke)("tooltip",o.chartDonutItemServiceOp.tooltip),t.xp6(5),t.hij(" ",o.itemsTotal," "),t.xp6(5),t.hij(" ",o.serviceTotal," "),t.xp6(9),t.Q6J("chart",o.chartMarketOp.chart)("colors",o.chartMarketOp.colors)("dataLabels",o.chartMarketOp.dataLabels)("fill",o.chartMarketOp.fill)("grid",o.chartMarketOp.grid)("legend",o.chartMarketOp.legend)("plotOptions",o.chartMarketOp.plotOptions)("responsive",o.chartMarketOp.responsive)("series",o.chartMarketOp.series)("states",o.chartMarketOp.states)("stroke",o.chartMarketOp.stroke)("tooltip",o.chartMarketOp.tooltip)("xaxis",o.chartMarketOp.xaxis)("yaxis",o.chartMarketOp.yaxis),t.xp6(4),t.Q6J("chart",o.chartDonutMarketOp.chart)("colors",o.chartDonutMarketOp.colors)("dataLabels",o.chartDonutMarketOp.dataLabels)("labels",o.chartDonutMarketOp.labels)("legend",o.chartDonutMarketOp.legend)("plotOptions",o.chartDonutMarketOp.plotOptions)("responsive",o.chartDonutMarketOp.responsive)("series",o.chartDonutMarketOp.series)("stroke",o.chartDonutMarketOp.stroke)("tooltip",o.chartDonutMarketOp.tooltip),t.xp6(5),t.hij(" ",o.internalTotal," "),t.xp6(5),t.hij(" ",o.externalTotal," "),t.xp6(5),t.hij(" ",o.commlTotal," "))},dependencies:[z.Hw,x.BZ,x.fO,x.as,x.w1,x.Dz,x.nj,x.mD,x.Ke,x.ge,x.ev,x.XQ,x.Gk,x.Q2,G.x,C.KI,I.O5,I.PC],encapsulation:2,changeDetection:0}),a})(),resolve:{data:(()=>{class a{constructor(e,o){this._projectService=e,this._filterMenuService=o,this._filterMenuService.filter$.subscribe(i=>{this._filter=i.filter})}resolve(e,o){return this._projectService.getData(this._filter)}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(V),t.LFG(P.a))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}];let Ut=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[j.Bz.forChild(It),L.ot,q.vV,E.t,z.Ps,$.Tx,W.Cv,Y.si,B.SJ,Q.JX,x.p0,J.Nh,F.lN,G.X,C.y4,H.m]}),a})()}}]);